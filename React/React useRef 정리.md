# React useRef 정리 노트

## 1. `useRef`란?

- React 훅 중 하나
- 컴포넌트가 **리렌더링돼도 값이 유지되는 "상자"** 같은 역할
- `.current`라는 프로퍼티 안에 원하는 값을 저장
- 값이 바뀌어도 **리렌더링이 발생하지 않음**

```tsx
const ref = useRef(0);
ref.current = ref.current + 1; // 값은 바뀌지만 리렌더는 안 됨
```

---

## 2. `useRef`와 `useState` 차이

| 구분        | useState                       | useRef                                  |
| ----------- | ------------------------------ | --------------------------------------- |
| 값이 바뀌면 | 리렌더 발생                    | 리렌더 없음                             |
| 용도        | UI 표시, 화면에 즉시 반영할 값 | 유지해야 하지만 화면 갱신과 무관한 값   |
| 예시        | 버튼 클릭 횟수, 로딩 여부      | DOM 요소 접근, 애니메이션 값, 타이머 ID |

---

## 3. "시간에 따라 변하는 값"과 `useRef`

- 애니메이션(`Animated.Value`)은 **매 프레임마다 값이 계속 변함**
  - 예: 카드 뒤집기 0 → 0.2 → 0.5 → 0.8 → 1
- 이걸 `useState`에 넣으면?
  → 값이 변할 때마다 리렌더링 발생 → 1초에 60번 이상 리렌더 → 성능 문제 ⚠️
- 그래서 `useRef`에 넣음
  → 값은 변하지만 리렌더는 발생하지 않음
  → 화면 갱신은 **React Native의 애니메이션 엔진**이 직접 처리

---

## 4. 비유로 이해하기

- **useState** = 영화 자막
  → 대사가 바뀔 때마다 자막 전체를 다시 그림 (리렌더 필요)
- **useRef** = 배우 몸동작
  → 배우는 계속 움직이지만, 카메라는 새로 찍지 않고 그대로 따라감 (리렌더 불필요)

---

## 5. 실전 예시

### 잘못된 사용 (useState)

```tsx
const [progress, setProgress] = useState(new Animated.Value(0));
progress.setValue(0.5); // 값 변경 → 리렌더 유발 → 성능 저하
```

### 올바른 사용 (useRef)

```tsx
const progressRef = useRef(new Animated.Value(0));
progressRef.current.setValue(0.5); // 값 변경 → 리렌더 없음 → 부드러운 애니메이션
```

---

## 정리

- `useRef`는 **값을 유지하면서도 리렌더를 막고 싶을 때** 사용
- DOM 요소 참조, 애니메이션 값, 타이머 ID, 이전 값 저장 등에 활용
- 애니메이션 같은 "시간에 따라 계속 변하는 값"은 반드시 `useRef`로 관리해야 성능이 좋음

---
