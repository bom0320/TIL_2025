Next.js Middlewareì—ì„œ ì¸ì¦ ìƒíƒœì— ë”°ë¼ ê²½ë¡œ ì œì–´í•˜ê¸°
===

### ì£¼ì œ
Next.jsì˜ `middleware` ì—ì„œ ë¡œê·¸ì¸ ìƒíƒœì— ë”°ë¼ ì‚¬ìš©ì ì ‘ê·¼ ê²½ë¡œë¥¼ ì œì–´í•˜ëŠ” ë°©ë²•ê³¼ ì¡°ê±´ ë¶„ê¸° ì²˜ë¦¬ ë°©ì‹ ë¹„êµ

## ê°œë… ìš”ì•½

### 1. Middlewareë€?
Next.jsì˜ `middleware` ëŠ” ì‚¬ìš©ì ìš”ì²­(request)ì„ í˜ì´ì§€ë¡œ ë„ë‹¬í•˜ê¸° ì „ì— ê°€ë¡œì±„ì„œ ì¸ì¦, ë¦¬ë‹¤ì´ë ‰ì…˜ ë“±ì˜ ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì´ë‹¤.

```ts
import { NextResponse } from 'next/server';
import type { NextRequest } from 'next/server';

export function middleware(request: NextRequest) {
  // ì¡°ê±´ì— ë”°ë¼ ë¦¬í„´ ì œì–´
  return NextResponse.next();
}
```
### ğŸ‘‰ ëª©ì 

- ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ìê°€ ë³´í˜¸ëœ í˜ì´ì§€ ì ‘ê·¼ ì‹œ â†’ `/signin`ìœ¼ë¡œ ë¦¬ë””ë ‰íŠ¸
- ë¡œê·¸ì¸í•œ ì‚¬ìš©ìê°€ `/signin`ì— ì ‘ê·¼ ì‹œ â†’ í™ˆ(`/stage`)ìœ¼ë¡œ ë¦¬ë””ë ‰íŠ¸

---

### 3. `pathname` ë¹„êµ ë°©ì‹ ì°¨ì´

| ë°©ì‹ | ì„¤ëª… | ì˜ˆì‹œ | íŠ¹ì§• |
| --- | --- | --- | --- |
| `startsWith()` | íŠ¹ì • ê²½ë¡œë¡œ ì‹œì‘í•˜ëŠ”ì§€ í™•ì¸ | `/admin/notice` â†’ `/admin` ë§¤ì¹­ë¨ | í•˜ìœ„ ê²½ë¡œ í¬í•¨ |
| `includes()` | ì •í™•íˆ ì¼ì¹˜í•˜ëŠ” ê²½ë¡œê°€ ë¦¬ìŠ¤íŠ¸ì— ìˆëŠ”ì§€ í™•ì¸ | `/signin` â†’ `['/signin', '/callback']` | ë‹¤ìˆ˜ ê²½ë¡œ ê°„ë‹¨ ë¹„êµ |
| `===` | ê²½ë¡œê°€ ì •í™•íˆ ê°™ì€ì§€ ë¹„êµ | `url === '/signin'` | ë‹¨ì¼ ê²½ë¡œ ëª…ì‹œì  ë¹„êµì— ì í•© |

### ì‚¬ìš© ì˜ˆì‹œ

```ts

const url = request.nextUrl.pathname;
url.startsWith('/admin');
publicPaths.includes(url);
url === '/signin';

```

## ğŸ“ ì‹¤ì „ íŒ

- `url === '/signin'` : íŠ¹ì • ê²½ë¡œë§Œ ì •í™•í•˜ê²Œ ì œì–´í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©
- `includes()` : ì—¬ëŸ¬ ê³µê°œ ê²½ë¡œë¥¼ ê´€ë¦¬í•  ë•Œ ìœ ìš©
- `startsWith()` : ê²½ë¡œê°€ `/admin/`, `/my/`ì²˜ëŸ¼ **ê³„ì¸µ êµ¬ì¡°**ì¼ ë•Œ ìœ ìš©

---
