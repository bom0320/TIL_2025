# 참조에 의한 부수 효과, 그리고 순수 함수

## 1. 참조에 의한 전달과 그 문제점

자바스크립트에서 객체는 **참조(reference)**에 의해 전달된다.
즉, 객체를 변수에 할당하거나 다른 변수에 대입하면, **객체 자체를 복사하는 것이 아니라 객체가 저장된 메모리 주소(참조값)를 복사**하게 된다.

```js
let a = { name: "봄" };
let b = a;
b.name = "이름";

console.log(a.name); // '이름'
```

이처럼 **여러 변수가 동일한 객체를 참조**하면, 한 쪽의 변경이 **다른 쪽에도 영향을 주는 부수 효과(side effect)**가 발생하 수 있다.

**📌 이 부작용은 아래와 같은 문제를 초래한다.**

- 외부 상태가 언제, 어디서 바뀌는지 추적하기 어려움
- 함수의 동작을 제대로 ㅇ해하려면 함수 내부를 들여다봐야 함
- 코드의 복잡성 증가 -> 가독성 저하, 디버깅 어려움
- 논리가 복잡해지면 버그가 숨어들 가능성 높아짐
  이러한 이유로, 객체의 직접적인 변경은 코드의 안정성과 유지 보수성에 악영향을 끼친다.

## 2. 옵저버 패턴의 필요성

참조된 객체가 여러 곳에서 공유되고 있다면, **한 쪽의 변경이 전체 시스템에 영향을 줄 수** 있다. 이럴 경우 객체의 변경을 감지하기 위해 **옵저버 패턴(observer pattern)** 등의 구조가 필요해진다.

- 객체를 참조하는 여러 주체에게 변경 사실을 통지
- 변경에 대한 대응 로직을 따로 구성해야 함

-> 결과적으로 코드가 **복잡해지고 무거워짐**

## 3. 해결책: 불변 객체(Immutable Object)

이러한 문제를 해결하기 위한 대표적인 방법은 **불변 객체를 사용하는 것**이다.

> ❌ 기존 객체를 직접 변경하지 않고
> ✅ 새로운 객체를 생성하여 재할당

```js
const newObj = { ...oldObj, name: "수정된 값" }; // 깊은 복사 or 방어적 복사
```

- 객체를 변경할 필요가 있을 때마다 **복사본 생성(방어적 복사)**
- 변경이 필요한 정보만 새롭게 정의 -> 상태 변경이 명확히 드러남
- 원본은 그대로 유지 -> 예측 가능한 코드 작성

### 장점

- 상태 변경 추적이 쉬움
- 부수 효과 방지
- 안정적인 구조 설계 간으

### 단점

- 객체 복사 비용 (성능 이슈) 발생 가능

## 4. 순수 함수와 함수형 프로그래밍

> **순수 함수(Pure Function) : 외부 상태에 의존하지 않고, 외부 상태를 변경하지 않는 함수**

```js
function add(a, b) {
  return a + b; // 항상 같은 입력 -> 같은 결과
}
```

```js
let total = 0;
function addToTotal(x) {
  total += x; // 외부 상태 변경  → ❌ 순수 아님
}
```

순수 함수는 다음과 같은 특징을 가진다:

- 같은 입력 -> 항상 같은 출력
- 부수 효과 없음 (side effect x)
- 테스트와 디버깅이 쉬움
- 함수 재사용과 조합이 쉬움

이러한 순수 함수를 중심으로 구성한 패러다임을 함수형 프로그래밍(Function Programming)이라고 한다.

### 핵심 요약

| 개념                  | 설명                                                                       |
| --------------------- | -------------------------------------------------------------------------- |
| **참조에 의한 전달**  | 객체는 변수 간 참조를 공유하기 때문에 한 쪽 변경이 다른 쪽에도 영향을 미침 |
| **부수 효과**         | 함수가 외부 상태를 변경하거나 외부 상태에 의존할 때 발생                   |
| **불변 객체**         | 객체를 직접 수정하지 않고, 복사하여 새 객체를 만들어 사용하는 방식         |
| **순수 함수**         | 외부 상태를 변경하지 않고, 동일 입력에 대해 항상 동일 출력이 나오는 함수   |
| **함수형 프로그래밍** | 순수 함수를 중심으로 구성된 안정적인 프로그래밍 방식                       |
